flowchart TB

  subgraph STEP_A0[STEP_A0_INVESTOR_SUBSCRIBE]
    EXT_INV_A0[EXT_INV_1]
    MIC_CASH_A0[MIC_CASH]
    MIC_CAP_TREAS_A0[MIC_CAP_TREAS]
    MIC_CAP_INV1_A0[MIC_CAP_INV1]

    EXT_INV_A0 -->|A0_SUBSCRIBE_CASH_250000| MIC_CASH_A0
    MIC_CAP_TREAS_A0 -->|A0_ISSUE_MICCAP_UNITS_250000| MIC_CAP_INV1_A0
  end

  subgraph STEP_B1[STEP_B1_ORIGINATION_NETTED_FEE]
    MIC_CASH_B1[MIC_CASH]
    EXT_BORR_B1[EXT_BORROWER_M123]
    POS_MIC_B1[POS_MIC]
    MORT_TREAS_B1[MORT_SHARE_TREAS]

    MIC_CASH_B1 -->|B1_FUND_PRINCIPAL_P| EXT_BORR_B1
    EXT_BORR_B1 -->|B1_LENDING_FEE_1PCT_OF_P| MIC_CASH_B1
    MORT_TREAS_B1 -->|B1_ALLOCATE_SHARES_ALL_TO_MIC| POS_MIC_B1
  end

  subgraph STEP_C[STEP_C_LISTING_FEE]
    MIC_CASH_C[MIC_CASH]
    MIC_AP_LIST_C[MIC_AP_LIST]
    EXT_PLATFORM_C[EXT_PLATFORM]

    MIC_CASH_C -->|C1_ACCRUE_LISTING_FEE_0P5PCT_OF_P| MIC_AP_LIST_C
    MIC_AP_LIST_C -->|C2_PAY_LISTING_FEE_0P5PCT_OF_P| EXT_PLATFORM_C
  end

  subgraph STEP_D[STEP_D_PRE_SALE_ACCRUAL]
    IR_D[INTEREST_RECEIVABLE]
    ACC_MIC_D[ACCRUED_MIC]
    SERV_MIC_D[SERV_FEE_TO_MIC]

    IR_D -->|D1_ACCRUE_INTEREST_TO_MIC_PRE_SALE| ACC_MIC_D
    IR_D -->|D1_ACCRUE_SERVICING_TO_MIC_PRE_SALE| SERV_MIC_D
  end

  subgraph STEP_E[STEP_E_MID_MONTH_SALE_80]
    POS_MIC_E[POS_MIC]
    POS_BUY_E[POS_BUYER]
    EXT_BUY_E[EXT_BUYER]
    MIC_CASH_E[MIC_CASH]
    IR_E[INTEREST_RECEIVABLE]
    SERV_MGMT_E[SERV_FEE_TO_MGMT]

    POS_MIC_E -->|E1_TRANSFER_SHARES_80| POS_BUY_E
    EXT_BUY_E -->|E2_SALE_PROCEEDS_TO_MIC_CASH| MIC_CASH_E
    IR_E -->|E3_SERVICING_ACCRUES_TO_MGMT_POST_SALE| SERV_MGMT_E
  end

  subgraph STEP_F[STEP_F_POST_SALE_ACCRUAL]
    IR_F[INTEREST_RECEIVABLE]
    ACC_MIC_F[ACCRUED_MIC]
    ACC_BUY_F[ACCRUED_BUYER]
    SERV_MGMT_F[SERV_FEE_TO_MGMT]

    IR_F -->|F1_ACCRUE_INTEREST_TO_MIC_20| ACC_MIC_F
    IR_F -->|F1_ACCRUE_INTEREST_TO_BUYER_80| ACC_BUY_F
    IR_F -->|F1_ACCRUE_SERVICING_TO_MGMT_POST_SALE| SERV_MGMT_F
  end

  subgraph STEP_H[STEP_H_MONTH_END_SETTLEMENT]
    EXT_BORR_H[EXT_BORROWER_M123]
    COLLECT_I_H[COLLECT_INTEREST]
    IR_H[INTEREST_RECEIVABLE]

    SERV_MGMT_H[SERV_FEE_TO_MGMT]
    EXT_MGMT_H[EXT_MGMT]

    MIC_CASH_H[MIC_CASH]
    EXT_BUY_H[EXT_BUYER]

    ACC_MIC_H[ACCRUED_MIC]
    ACC_BUY_H[ACCRUED_BUYER]
    MIC_ROUND_H[MIC_ROUND]

    EXT_BORR_H -->|H1_PAD_INTEREST_PAYMENT_I_PAID| COLLECT_I_H
    COLLECT_I_H -->|H1_SETTLE_RECEIVABLE_I_PAID| IR_H

    COLLECT_I_H -->|H2_PAY_SERVICING_S_MONTH| SERV_MGMT_H
    SERV_MGMT_H -->|H2_REMIT_SERVICING_TO_MGMT| EXT_MGMT_H

    COLLECT_I_H -->|H3_SETTLE_MIC_ACCRUED_TO_MIC_CASH| MIC_CASH_H
    ACC_MIC_H -->|H3_CLEAR_MIC_ENTITLEMENT| MIC_ROUND_H

    COLLECT_I_H -->|H3_SETTLE_BUYER_ACCRUED_TO_BUYER| EXT_BUY_H
    ACC_BUY_H -->|H3_CLEAR_BUYER_ENTITLEMENT| MIC_ROUND_H
  end

  subgraph STEP_H4[STEP_H4_FUND_MGMT_FEE]
    MIC_CASH_H4[MIC_CASH]
    MIC_AP_FM_H4[MIC_AP_FM]
    EXT_FM_H4[EXT_FUND_MANAGER]

    MIC_CASH_H4 -->|H4_ACCRUE_FUND_MGMT_FEE| MIC_AP_FM_H4
    MIC_AP_FM_H4 -->|H4_PAY_FUND_MGMT_FEE| EXT_FM_H4
  end

  subgraph STEP_H5[STEP_H5_MIC_DISTRIBUTIONS_NET0]
    MIC_CASH_H5[MIC_CASH]
    MIC_DIST_AP_H5[MIC_DIST_PAYABLE]
    EXT_INV_H5[EXT_INV_1]
    MIC_ROUND_H5[MIC_ROUND]

    MIC_CASH_H5 -->|H5_DECLARE_DIST_PAYABLE| MIC_DIST_AP_H5
    MIC_DIST_AP_H5 -->|H5_PAY_DIVIDEND_TO_INV| EXT_INV_H5
    MIC_DIST_AP_H5 -->|H5_ROUNDING_REMAINDER| MIC_ROUND_H5
  end
